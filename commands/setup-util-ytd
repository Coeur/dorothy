#!/usr/bin/env bash

# install the various youtube download utilities
# https://github.com/soimort/you-get

function setup_util_wget() (
	source "$DOROTHY/sources/bash.bash"

	# ---------------------------------
	# https://github.com/yt-dlp/yt-dlp
	# https://github.com/yt-dlp/yt-dlp/wiki/Installation
	# only support pip, as others are buggy

	# remove alternative methods
	local options=(
		--uninstall
		--quiet
		--name='yt-dlp'
		BREW='yt-dlp'
		AUR='yt-dlp' # ARCH
		APT_REPO='ppa:yt-dlp/stable'
		APT='yt-dlp' # UBUNTU
		PORT='yt-dlp'
		SCOOP='yt-dlp'
		CHOCO='yt-dlp'
		WINGET='yt-dlp'
		PKG='yt-dlp'
	)
	setup-util "${options[@]}"

	# only use pip
	options=(
		--optional
		--cli='yt-dlp'
		--name='yt-dlp'
		"$@"
		PIP='yt-dlp'
	)
	setup-util "${options[@]}"

	# ---------------------------------
	# https://github.com/ytdl-org/youtube-dl
	# only support pip, as others are buggy

	# remove alternative methods
	options=(
		--uninstall
		--quiet
		--name='youtube-dl'
		BREW='youtube-dl'
	)
	setup-util "${options[@]}"

	# only use pip
	options=(
		--optional
		--cli='youtube-dl'
		--name='youtube-dl'
		"$@"
		PIP='youtube-dl'
	)
	setup-util "${options[@]}"

	# ---------------------------------
	# https://github.com/kkdai/youtube

	# failing with: package github.com/kkdai/youtube/v2 is not a main package
	# local options=(
	#	--optional
	# 	--cli='youtubedr'
	# 	"$@"
	# 	GO='github.com/kkdai/youtube/v2'
	# 	# GO='github.com/kkdai/youtube/v2/cmd/youtubedr'
	# )
	# setup-util "${options[@]}"

	# ---------------------------------
	# https://github.com/iawia002/lux

	local options=(
		--optional
		--cli='lux'
		"$@"
		GO='github.com/iawia002/lux'
	)
	setup-util "${options[@]}"
)

# fire if invoked standalone
if test "$0" = "${BASH_SOURCE[0]}"; then
	setup_util_wget "$@"
fi
